---
// BlogPostLayout.astro - A reusable template for blog posts with modern typography
// Usage: Just import this layout in your MDX file and wrap your content with it

const { frontmatter, hideTitle = false } = Astro.props;
const isSplashTemplate = frontmatter.template === 'splash';
import { Icon } from '@astrojs/starlight/components';
import '../styles/blog-post.css';
---

<div class="blog-post-wrapper">
  <!-- Hero section with title and metadata -->
  <div class="blog-post-hero">
    <div class="blog-post-hero-border">
      {!isSplashTemplate && (
        <h1 class="blog-post-title">{frontmatter.title}</h1>
      )}
      <p class="blog-post-description">{frontmatter.description}</p>

      <div class="blog-post-meta">
        {frontmatter.author && (
          <div style="display: flex; align-items: center;">
            <div class="blog-post-avatar">
              <img src={`https://www.gravatar.com/avatar/93047f1d8e343ca3af1451616829ceb1?s=150`} alt={frontmatter.author} />
            </div>
            <div class="blog-post-author-info">
              <div class="blog-post-author-name">
                <a href="https://x.com/sshivasurya">{frontmatter.author}</a>
              </div>
              {frontmatter.pubDate && (
                <div class="blog-post-date">
                  {new Date(frontmatter.pubDate).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                  })}
                </div>
              )}
            </div>
          </div>
        )}

        {frontmatter.tags && (
          <div class="blog-post-tags">
            {Array.isArray(frontmatter.tags)
              ? frontmatter.tags.join(' â€¢ ')
              : frontmatter.tags}
          </div>
        )}
      </div>
    </div>
  </div>

  <!-- Share buttons at top -->
  <div class="blog-post-share">
    <a href={`https://x.com/intent/tweet?text=${encodeURIComponent(frontmatter.title)}&url=${encodeURIComponent('https://codepathfinder.dev/' + Astro.url.pathname)}`}
       target="_blank"
       rel="noopener noreferrer"
       class="blog-post-share-btn twitter">
      <Icon name="twitter" />
    </a>
    <a href={`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent('https://codepathfinder.dev/' + Astro.url.pathname)}`}
       target="_blank"
       rel="noopener noreferrer"
       class="blog-post-share-btn linkedin">
      <Icon name="linkedin" />
    </a>
    <a href={`https://www.reddit.com/submit?url=${encodeURIComponent('https://codepathfinder.dev/' + Astro.url.pathname)}&title=${encodeURIComponent(frontmatter.title)}`}
       target="_blank"
       rel="noopener noreferrer"
       class="blog-post-share-btn reddit">
      <Icon name="reddit" />
    </a>
    <a href={`https://news.ycombinator.com/submitlink?u=${encodeURIComponent('https://codepathfinder.dev/' + Astro.url.pathname)}&t=${encodeURIComponent(frontmatter.title)}`}
       target="_blank"
       rel="noopener noreferrer"
       class="blog-post-share-btn hackernews">
      <span>HN</span>
    </a>
  </div>

  <!-- Article content with improved typography -->
  <article class="blog-post-content">
    <slot />
  </article>

  <!-- Share buttons at bottom -->
  <div class="blog-post-share-bottom">
    <h3>Share this post</h3>
    <div class="blog-post-share">
      <a href={`https://x.com/intent/tweet?text=${encodeURIComponent(frontmatter.title)}&url=${encodeURIComponent('https://codepathfinder.dev/' + Astro.url.pathname)}`}
         target="_blank"
         rel="noopener noreferrer"
         class="blog-post-share-btn twitter">
        <Icon name="twitter" />
      </a>
      <a href={`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent('https://codepathfinder.dev/' + Astro.url.pathname)}`}
         target="_blank"
         rel="noopener noreferrer"
         class="blog-post-share-btn linkedin">
        <Icon name="linkedin" />
      </a>
      <a href={`https://www.reddit.com/submit?url=${encodeURIComponent('https://codepathfinder.dev/' + Astro.url.pathname)}&title=${encodeURIComponent(frontmatter.title)}`}
         target="_blank"
         rel="noopener noreferrer"
         class="blog-post-share-btn reddit">
        <Icon name="reddit" />
      </a>
      <a href={`https://news.ycombinator.com/submitlink?u=${encodeURIComponent('https://codepathfinder.dev/' + Astro.url.pathname)}&t=${encodeURIComponent(frontmatter.title)}`}
         target="_blank"
         rel="noopener noreferrer"
         class="blog-post-share-btn hackernews">
        <span>HN</span>
      </a>
    </div>
  </div>
</div>