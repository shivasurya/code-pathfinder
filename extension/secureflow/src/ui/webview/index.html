<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureFlow AI</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' ${cspSource}; style-src 'self' 'unsafe-inline' ${cspSource}; script-src 'self' 'unsafe-inline' ${cspSource}; img-src 'self' data: https: ${cspSource};">
    <link rel="stylesheet" href="${stylesUri}" />
</head>
<body>
    <h3>SecureFlow Profiles</h3>
    <div id="mainContent">
        <div class="select-container" style="display: none;">
            <select id="profileSelect">
                <option value="">Select a profile...</option>
            </select>
            <button id="scanAll" class="action-btn refresh-btn" title="Scan All Profiles">‚Üª</button>
        </div>
        <div id="emptyState" class="empty-state">
            <div class="empty-state-icon">
                <img src="${iconUri}" alt="SecureFlow" />
            </div>
            
            <!-- Step 1: Welcome -->
            <div id="onboardingStep1" class="onboarding-step">
                <div>
                    <h3 style="margin: 0 0 12px 0;">Welcome to SecureFlow AI</h3>
                    <div class="feature-list">
                        <div class="feature-item">Review code for security risks</div>
                        <div class="feature-item">Surface potential vulnerabilities</div>
                        <div class="feature-item">Assist with threat modeling</div>
                        <div class="feature-item">Recommend security fixes</div>
                    </div>
                </div>
                <button id="startOnboarding" class="scan-btn">
                    <span style="font-family: codicon;">üöÄ</span>
                    Get Started
                </button>
            </div>
            
            <!-- Step 2: Model Selection -->
            <div id="onboardingStep2" class="onboarding-step" style="display: none;">
                <div>
                    <h3 style="margin: 0 0 12px 0;">Choose Your AI Model</h3>
                    <div class="form-group">
                        <label for="modelSelect">AI Model:</label>
                        <select id="modelSelect" class="form-select">
                            <option value="claude-sonnet-4-5-20250929">Claude 4.5 Sonnet (Recommended)</option>
                            <option value="gpt-5-pro">GPT-5 Pro</option>
                            <option value="gpt-5">GPT-5</option>
                            <option value="gpt-5-mini">GPT-5 Mini</option>
                            <option value="gpt-5-nano">GPT-5 Nano</option>
                            <option value="o3">O3</option>
                            <option value="o3-pro">O3 Pro</option>
                            <option value="o3-mini">O3 Mini</option>
                            <option value="o4-mini">O4 Mini</option>
                            <option value="gpt-4.1">GPT-4.1</option>
                            <option value="gpt-4.1-mini">GPT-4.1 Mini</option>
                            <option value="gpt-4o">GPT-4o</option>
                            <option value="gpt-4o-mini">GPT-4o Mini</option>
                            <option value="o1">O1</option>
                            <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
                            <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                            <option value="claude-opus-4-1-20250805">Claude Opus 4.1</option>
                            <option value="claude-opus-4-20250514">Claude Opus 4</option>
                            <option value="claude-sonnet-4-20250514">Claude Sonnet 4</option>
                            <option value="claude-3-7-sonnet-20250219">Claude 3.7 Sonnet</option>
                            <option value="claude-haiku-4-5">Claude 4.5 Haiku</option>
                            <option value="claude-3-5-haiku-20241022">Claude 3.5 Haiku</option>
                            <option value="grok-4-fast-reasoning">Grok 4 Fast Reasoning</option>
                        </select>
                    </div>
                </div>
                <div class="onboarding-buttons">
                    <button id="backToStep1" class="secondary-btn">
                        <span style="font-family: codicon;">‚Üê</span>
                        Back
                    </button>
                    <button id="continueToStep3" class="scan-btn">
                        Continue
                        <span style="font-family: codicon;">‚Üí</span>
                    </button>
                </div>
            </div>
            
            <!-- Step 3: API Key Configuration -->
            <div id="onboardingStep3" class="onboarding-step" style="display: none;">
                <div>
                    <h3 style="margin: 0 0 12px 0;">Configure API Key</h3>
                    <div class="form-group">
                        <label for="apiKeyInput">API Key:</label>
                        <input type="password" id="apiKeyInput" class="form-input" placeholder="Enter your API key..." />
                        <div class="input-help">
                            <span style="font-family: codicon;">üîí</span>
                            Your API key is stored securely and never shared
                        </div>
                    </div>
                    <div id="selectedModelInfo" class="model-info">
                        <!-- Model info will be populated by JavaScript -->
                    </div>
                </div>
                <div class="onboarding-buttons">
                    <button id="backToStep2" class="secondary-btn">
                        <span style="font-family: codicon;">‚Üê</span>
                        Back
                    </button>
                    <button id="continueToStep4" class="scan-btn">
                        Continue
                        <span style="font-family: codicon;">‚Üí</span>
                    </button>
                </div>
            </div>
            
            <!-- Step 4: Ready to Analyze -->
            <div id="onboardingStep4" class="onboarding-step" style="display: none;">
                <div style="text-align: center;">
                    <h3 style="margin: 0 0 12px 0;">Ready to Secure Your Workspace!</h3>
                    <div id="configSummary" class="config-summary">
                        <!-- Configuration summary will be populated by JavaScript -->
                    </div>
                </div>
                <div class="onboarding-buttons">
                    <button id="backToStep3" class="secondary-btn">
                        <span style="font-family: codicon;">‚Üê</span>
                        Back
                    </button>
                    <button id="scanWorkspace" class="scan-btn">
                        <span style="font-family: codicon;">‚ö°</span>
                        Secure Your Workspace
                    </button>
                </div>
            </div>
            
            <div class="ai-disclaimer">
                SecureFlow is powered by AI. While our analysis strives to be thorough, please review all suggestions carefully before implementation.
            </div>
        </div>
        <div id="profileDetails" class="profile-details" style="display: none;">
            <h2>
                Profile Details
                <div class="actions">
                    <button id="rescanProfile" class="action-btn refresh-btn" title="Rescan Profile">‚Üª</button>
                    <button id="deleteProfile" class="action-btn delete-btn" title="Delete Profile">‚úñ</button>
                </div>
            </h2>
            <div id="profileContent"></div>
        </div>
    </div>
    <script type="module" src="${scriptUri}"></script>
</body>
</html>
